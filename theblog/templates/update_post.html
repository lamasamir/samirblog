{% extends "base.html" %}

{% block title %}
  Edit Blog Post | MyBlog
{% endblock %}

{% block content %}
<div class="container mt-5 mb-5">

  {% if user.is_authenticated %}
    {% if user.id == post.author.id %}
    
      <div class="card shadow-sm border-0">
        <div class="card-body p-5">
          <h2 class="fw-bold text-primary mb-4">âœï¸ Edit Your Post</h2>
          <p class="text-muted mb-4">Make changes to your article and click <strong>Update</strong> to save.</p>

          <form method="POST" enctype="multipart/form-data" class="needs-validation">
            {% csrf_token %}
            {{ form.media }}

            <div class="mb-3">
              {{ form.as_p }}
            </div>

            <button type="submit" class="btn btn-primary px-4">ğŸ’¾ Update</button>
            <a href="{% url 'article' post.pk %}" class="btn btn-outline-secondary ms-2">Cancel</a>
          </form>
        </div>
      </div>

    {% else %}
      <div class="alert alert-danger mt-5">
        ğŸš« You are not allowed to edit this post.
      </div>
    {% endif %}
  {% else %}
    <div class="alert alert-warning mt-5">
      âš ï¸ You must <a href="{% url 'login' %}">log in</a> to edit posts.
    </div>
  {% endif %}

</div>
{% endblock %}
